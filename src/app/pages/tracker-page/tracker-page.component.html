<app-parental-header></app-parental-header>

<div class="tracker-container">
    <!-- header message -->
    <h2 matDialogTitle>{{'NUTRITION.TITLE' | translate}}</h2><br>
    <text-card *ngIf="showItems" mainMessage="{{ 'NUTRITION.MESSAGE' | translate }}" [bulletedMessages]="BULLETED_INSTRUCTIONS" [instructionsTitle]="'NUTRITION.INSTRUCTIONS' | translate "></text-card>
    <br>

    <!-- age form -->
    <div *ngIf="showAgeForm" class="qb-container">
        <mat-card class="qb-card">
            <div style="font-style: italic; color:Blue;">{{'Please complete the tracking once a week' | translate}}</div>
            <mat-label style="text-align:center" class="qb-row-item"><strong>{{'Infant age' | translate}}</strong></mat-label>
            <mat-form-field>
                <input #ageValue matInput value="infantage" class="qb-row-item" type="number" min="1" max="24" placeholder=" {{'In months' | translate }}" autocomplete="off" required translate>
            </mat-form-field>
            <mat-card-actions>
                <div class="qb-button">
                    <button mat-raised-button (click)="enterAge(ageValue.value)" color="primary" >{{'Enter Age' | translate}}</button>
                </div>
            </mat-card-actions>
        </mat-card>
    </div>

    <form *ngIf="showItems" [formGroup]="trackerForm" (ngSubmit)="submitTracker()">
        <!-- tracker cards -->
        <span formArrayName="responses">
      <div class="trackeritem-container" *ngFor="let result of foodResults; let $index = index" [formGroupName]="$index">
        <mat-card class="tracker-card">
          <div style="float: left">
            <label><strong>{{ 'result.' + $index + '.foodItemGroupName' | translate }}</strong></label><br>
            <label *ngIf="showBracketFirst">{{ 'result.'+ $index + '.firstBracketIntake' | translate}}</label>
            <label *ngIf="showBracketSecond">{{ 'result.' + $index + '.secondBracketIntake' | translate}}</label>
            <label *ngIf="showBracketThird">{{ 'result.' + $index + '.thirdBracketIntake' | translate}}</label>
          </div>
          <div class="tracker-buttons">
            <mat-button-toggle-group formControlName="answer">
              <mat-button-toggle value="Above"><mat-icon svgIcon="up_arrow"></mat-icon></mat-button-toggle>
              <mat-button-toggle value="Equal"><mat-icon svgIcon="equal_sign"></mat-icon></mat-button-toggle>
              <mat-button-toggle value="Below"><mat-icon svgIcon="down_arrow"></mat-icon></mat-button-toggle>
            </mat-button-toggle-group>
          </div>
        </mat-card>
      </div>
    </span>

        <!-- submit button -->
        <div class="footer">
            <button mat-raised-button color="primary" i18n>Submit</button>
        </div>

    </form>

</div>
